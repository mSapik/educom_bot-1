# Educom Telegram Bot

Бот для проверки обновлений ленты новостей в Личном Кабинете Директора (ЕКИС) http://lk.educom.ru
и отправки уведомлений в указанные чаты.
По-умолчанию проверка выполняется каждые 30 секунд, обновление сессии каждые 30 минут или после неудачной проверки.

## Требования

  1. Учетная запись от [Личного Кабинета Директора](http://lk.educom.ru/login.html).
  1. Токен бота, полученный от [@BotFather](https://t.me/botfather).
  1. Идентификатор чата администратора (для отправки ошибок бота) и ипользователей (для отправки уведомлений).
     Можно получить от [@userinfobot](https://telegram.me/userinfobot) или самого этого бота командой `/start`.

## Настройки

  1. Установить Python 3.9 (с другими версиями бот не проверялся)
  1. Клонировать и открыть каталог репозитория
  1. Установить зависимости `pip install -r requirements.txt`
  1. Переименовать файл `.env.example` в `.env`
  1. Отредактировать файл `.env`, заменив переменные на свои
      - `LK_USERNAME`: имя пользователя для входа в ЛК
      - `LK_PASSWORD`: пароль для входа в ЛК
      - `BOT_TOKEN`: токен бота
      - `BOT_USERS_CHAT_ID`: идентификаторы чатов пользователей через запятую без пробелов
      - `BOT_ADMIN_CHAT_ID`: идентификатор чата админа
      - `PROXY_URL`: ссылка для http прокси. Если ваш провайдер не блокирует API Telegram, то параметр можно удалить

## Запуск

`python educom_bot/bot.py`

## Разработка

  1. Установить зависимости для разработки `pip install -r requirements.dev.txt`
  1. Установить pre-commit hook `pre-commit install`
